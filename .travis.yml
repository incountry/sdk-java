addons:
  sonarcloud:
    organization: "incountry"

language:
  java

jdk:
  - openjdk8

sudo: false

notifications:
  email: false

before_install:
  - wget https://services.gradle.org/distributions/gradle-6.3-all.zip
  - unzip -qq gradle-6.3-all.zip
  - export GRADLE_HOME=$PWD/gradle-6.3
  - export PATH=$GRADLE_HOME/bin:$PATH
  - gradle -v

script:
  - git fetch --no-tags https://github.com/incountry/sdk-java.git +refs/heads/develop:refs/remotes/origin/develop
  - git fetch --no-tags https://github.com/incountry/sdk-java.git +refs/heads/master:refs/remotes/origin/master
  - gradle build jacocoTestReport sonarqube --info
  - gradle integrationTest
